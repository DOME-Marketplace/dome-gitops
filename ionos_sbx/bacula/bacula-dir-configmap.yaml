apiVersion: v1
kind: ConfigMap
metadata:
  name: bacula-config
  namespace: bacula
data:
  bacula-dir.conf: |
    #
    # Bacula Director Configuration
    #
    Director {
      Name = bacula-dir
      DIRport = 9101
      QueryFile = "/opt/bacula/scripts/query.sql"
      WorkingDirectory = "/opt/bacula/working"
      PidDirectory = "/opt/bacula/working"
      Maximum Concurrent Jobs = 300
      Password = "bacula" # Console password
      Messages = Daemon
    }

    Client {
      Name = bacula-fd
      Address = bacula-fd
      FDPort = 9102
      Catalog = MyCatalog
      Password = "bacula"
      File Retention = 60 days
      Job Retention = 6 months
      AutoPrune = yes
    }

    Storage {
      Name = File1
      Address = bacula-sd
      SDPort = 9103
      Device = FileChgr1
      MediaType = File1
      Password = "bacula"
    }

  bacula-fd.conf: |
    #
    # Bacula File Daemon Configuration
    #
    FileDaemon {
      Name = bacula-fd
      FDport = 9102
      WorkingDirectory = /opt/bacula/working
      PidDirectory = /opt/bacula/working
      Maximum Concurrent Jobs = 20
    }

    Director {
      Name = bacula-dir
      Password = "bacula"
    }

    Messages {
      Name = Standard
      director = bacula-dir = all
    }

  bconsole.conf: |
    #
    # Bacula Console Configuration
    #
    Director {
      Name = bacula-dir
      DIRport = 9101
      Password = "bacula"
    }

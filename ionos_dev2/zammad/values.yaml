zammad:
  image:
    repository: kingmanfri/dome_ticketing_zammad
    tag: "1.4"
    pullPolicy: Always

  ingress:
    enabled: true
    className: nginx
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-dev2-issuer
    hosts:
      - host: ticketing.dome-marketplace-dev2.org
        paths:
          - path: /
            pathType: ImplementationSpecific
    tls:
      - secretName: ticketing-tls-secret
        hosts:
          - ticketing.dome-marketplace-dev2.org

  railsserver:
    webConcurrency: 3
    resources:
      requests:
        cpu: 1000m
        memory: 2Gi
      limits:
        cpu: 2000m
        memory: 4Gi

    securityContext:
      allowPrivilegeEscalation: false
      capabilities:
        drop:
          - ALL
      readOnlyRootFilesystem: false
      privileged: false
    readinessProbe:
      httpGet:
        path: /
        port: 3000
      initialDelaySeconds: 45
      periodSeconds: 15
      timeoutSeconds: 5
    autoscaling:
      enabled: true
      minReplicas: 1
      maxReplicas: 4
      targetCPUUtilizationPercentage: 75
      stabilizationWindowSeconds: 180

  elasticsearch:
    image:
      repository: bitnamilegacy/elasticsearch
      tag: 8.12.0-debian-11-r1
    sysctlImage:
      registry: docker.io
      repository: bitnamilegacy/os-shell
      tag: 11-debian-11-r96
    clusterName: zammad
    master:
      masterOnly: false
      replicaCount: 1
      heapSize: 1g
      resources:
        requests:
          cpu: 500m
          memory: 2Gi
        limits:
          cpu: 1000m
          memory: 3Gi
    coordinating:
      replicaCount: 0
    data:
      replicaCount: 0
    ingest:
      replicaCount: 0

  # Specific configuration for PostgreSQL subchart
  postgresql:
    image:
      repository: bitnamilegacy/postgresql
      tag: 15.4.0-debian-11-r45
    primary:
      podAnnotations:
        backup.velero.io/backup-volumes: data
      resources:
        requests:
          cpu: "500m"
          memory: "1Gi"
        limits:
          cpu: "1000m"
          memory: "2Gi"
  redis:
    image:
      repository: bitnamilegacy/redis
      tag: 7.0.12-debian-11-r34
    master:
      resources:
        requests:
          cpu: "100m"
          memory: "128Mi"
        limits:
          cpu: "250m"
          memory: "256Mi"

  memcached:
    image:
      repository: bitnamilegacy/memcached
      tag: 1.6.23-debian-11-r0
    resources:
      requests:
        cpu: "100m"
        memory: "128Mi"
      limits:
        cpu: "250m"
        memory: "256Mi"